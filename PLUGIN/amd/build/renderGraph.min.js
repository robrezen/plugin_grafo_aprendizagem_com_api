define(["core/log"],function(e){return{renderGraph(n,r){e.debug(`Rendering graph in container ${n}`);let a=document.getElementById(n);a.innerHTML="";let t=new Map,o=new vis.DataSet(Object.keys(r.nodes).map(e=>{let n=r.nodes[e],a=(e=>{if(-1===e)return{border:"#BDBDBD",background:"#E0E0E0"};let n,r;return e<=255?(n=255,r=Math.round(e/255*255)):(n=Math.round(255-(e-255)/255*255),r=255),{border:`rgba(${n}, ${r}, 0, 1)`,background:`rgba(${n}, ${r}, 0, 0.7)`}})(n.level);return{id:e,label:e,size:2*n.importance,color:{border:a.border,background:a.background,highlight:{border:"#FFEB3B",background:"#FFEB3B"},hover:{border:"#FFEB3B",background:"#FFF9C4"}},font:{color:"#212121",size:14,face:"Roboto, Arial, sans-serif",background:"rgba(255,255,255,0.8)",strokeWidth:0,align:"center"},shape:"dot"}})),i=new vis.DataSet(r.edges.map((e,n)=>({from:e.head,to:e.tail,label:e.type,font:{align:"middle",color:"#757575",size:12,face:"Roboto, Arial, sans-serif",strokeWidth:0,background:"rgba(255,255,255,0.8)"},color:{inherit:"from"},arrows:{to:{enabled:!0,scaleFactor:.5}},smooth:{type:"straightCross",roundness:.2+n%3*.2}}))),s=new vis.Network(a,{nodes:o,edges:i},{nodes:{shape:"dot",scaling:{min:10,max:30},borderWidth:2,shadow:!1,font:{size:12,face:"Roboto, Arial, sans-serif",color:"#212121"}},edges:{shadow:!1},layout:{improvedLayout:!0,hierarchical:!1},interaction:{hover:!0,tooltipDelay:200,hideEdgesOnDrag:!0,hideEdgesOnZoom:!0},physics:{enabled:!0,barnesHut:{gravitationalConstant:-2e3,centralGravity:.5,springLength:150,springConstant:.02,damping:.9,avoidOverlap:1},maxVelocity:50,minVelocity:.1,solver:"barnesHut",stabilization:{enabled:!0,iterations:2e3,updateInterval:25},timestep:.5,adaptiveTimestep:!0}});switch(s.redraw(),s.fit(),("module-graph-container"===n||"lessonplan-graph-container"===n||"user-graph-container"===n)&&s.once("afterDrawing",()=>{var e=a.offsetWidth,n=a.offsetHeight;console.log(e,n),s.moveTo({offset:{x:.5*e*1,y:.5*n*1},scale:1})}),t.set(n,s),n){case"lessonplan-graph-container":document.getElementById("fullscreen-btn-lesson").addEventListener("click",()=>d("lessonplan-graph-container"));break;case"module-graph-container":document.getElementById("fullscreen-btn-module").addEventListener("click",()=>d("module-graph-container"));break;case"user-graph-container":document.getElementById("fullscreen-btn-student").addEventListener("click",()=>d("user-graph-container"))}function d(e){let n=t.get(e);n&&(console.debug(`Fitting graph to container ${e}`),n.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}}))}}}});